{{define "head"}}
<!doctype html>
<html lang="no">
	<head>
		<meta charset="utf-8">
		<title>{{.PageTitle}}</title>
		<meta name="viewport"
		      content="width=device-width, initial-scale=1.0">
		<meta name="description"
		      content="{{.SiteDescription}}">
		<link rel="stylesheet"
		      href="/static/styles.css"
		      type="text/css">
	</head>
	<body>
{{end}}

{{define "nav"}}
		<div class="content">
			<div class="bar">
				<nav class="bar-mid">
					<a href="/">{{.SiteTitle}}</a> /
					<strong>{{.PageTitle}}</strong>
				</nav>
			</div>
			<div class="wrap">
{{end}}

{{define "foot"}}
			</div>
			<div class="bar footer-hidden">
				<div class="bar-mid">
					<a href="/help">Hjelp med IRC-chat</a> - 
					<a href="/submit">Legg til chatterom</a>
				</div>
			</div>
			<div class="bar footer">
				<div class="bar-mid">
					<a href="/help">Hjelp med IRC-chat</a> - 
					<a href="/submit">Legg til chatterom</a>
				</div>
			</div>
		</div>
	</body>
</html>
{{end}}

{{define "index"}}
{{template "head" .}}
		{{with $global := .}}
		{{if .MorePrev}}
		{{template "nav" .}}
		{{else}}
		<div class="content">
			<div class="bar">
				<div class="bar-mid bar-banner">
					<h1><img id="logo" src="/static/logo.png" alt="Logo">{{.SiteTitle}}</h1>
				</div>
			</div>
			<div class="description">
				{{.SiteDescription}}<br>
				Klikk <a href="/help">her</a> hvis du ikke er kjent med IRC.
			</div>
			<div class="wrap">
				{{if .Admin}}<p><a href="/logout">Logg ut</a></p>{{end}}
			{{end}}
				<ol class="channel-list">
				{{range .Channels}}
					<li class="channel" itemscope="http://schema.org/Thing">
						<div class="channel-info">
							<a href="{{.WebLink}}"
							   rel="nofollow"
							   class="channel-name channel-link"
							   itemprop="name">{{.Name}}</a>
							[<span class="channel-server">{{.Server}}</span>]
							<div itemprop="description">
								{{.Description}}
							</div>
						</div>
						<div class="channel-{{if .Error}}error{{else}}status{{end}}">
							{{.Status}}
							{{if $global.Admin}}
							<br>
							<a href="/edit?name={{.Name}}&server={{.Server}}">rediger</a> -
							<a href="/delete?name={{.Name}}&server={{.Server}}">slett</a> -
							<a href="/uncheck?name={{.Name}}&server={{.Server}}">omskjekk</a>
							{{end}}
						</div>
					</li>
				{{end}}
				</ol>
				<nav class="pagenav">
					{{if .MorePrev}}<a href="/?page={{.PagePrev}}">Forrige</a>{{end}}
					{{if .MoreNext}}{{if .MorePrev}}-{{end}}{{end}}
					{{if .MoreNext}}<a href="/?page={{.PageNext}}">Neste</a>{{end}}
				</nav>
				{{end}}
{{template "foot" .}}
{{end}}

{{define "approve"}}
{{template "head" .}}
{{template "nav" .}}
				{{with $snobal := .}}
				{{if .Message}}<p>{{.Message}}</p>{{end}}
				<ol class="channel-list">
					{{range .Channels}}
					<li class="channel">
						<a href="{{.WebLink}}"
						   rel="nofollow"
						   class="channel-name channel-link"
						   itemprop="name">{{.Name}}</a>
						[<span class="channel-server">{{.Server}}</span>]
						<div itemprop="description">
							{{.Description}}
						</div>
						<span class="channel-grey">{{.Status}}</span>
						{{if $snobal.Admin}}
						<br>
						<a href="/edit?name={{.Name}}&server={{.Server}}">rediger</a> -
						<a href="/approve?name={{.Name}}&server={{.Server}}">godkjen</a> -
						<a href="/delete?name={{.Name}}&server={{.Server}}">slett</a>
						{{end}}
					</li>
					{{end}}
				</ol>
				{{if .MorePrev}}<a href="/approve?page={{.PagePrev}}">Forrige</a>{{end}}
				{{if .MoreNext}}{{if .MorePrev}}-{{end}}{{end}}
				{{if .MoreNext}}<a href="/approve?page={{.PageNext}}">Neste</a>{{end}}
				{{end}}
{{template "foot" .}}
{{end}}

{{define "submit"}}
{{template "head" .}}
{{template "nav" .}}
				<form method="post" action="/submit">
					<fieldset>
						{{if .Message}}<p>{{.Message}}</p>{{end}}
						<ol>
							<li>
								<label for="submit-name">Kanalnavn: </label>
								<input
								       type="text"
								       id="submit-name"
								       name="name"
								       value="{{.Name}}"
								       placeholder="#kanal"
								       required>
							</li>
							<li>
								<label for="submit-server">IRC-nettverk: </label>
								<input type="text"
								       id="submit-server"
								       name="server"
								       value="{{.Server}}"
								       placeholder="irc.eksempel.net"
								       required>
							</li>
							<li>
								<label for="submit-weblink">Webchat-URL: </label>
								<input type="text"
								       id="submit-weblink"
								       value="{{.WebLink}}"
								       placeholder="http://"
								       name="weblink">
							</li>
							<li>
								<label for="submit-description">Beskrivelse:</label><br>
								<textarea name="description"
									  id="submit-description"
									  maxlength="160"
									  required>{{.Description}}</textarea>
							</li>
						</ol>
						<input type="submit" value="Send inn">
					</fieldset>
				</form>
{{template "foot" .}}
{{end}}


{{define "login"}}
{{template "head" .}}
{{template "nav" .}}
				<form method="post" action="/login">
					<fieldset>
						{{if .Message}}<p>{{.Message}}</p>{{end}}
						{{if .Success}}<p><a href="{{.Redirect}}">Tilbake</a></p>
						{{else}}
						<input type="hidden"
						       name="redirect"
						       value="{{.Redirect}}">
						<ol>
							<li>
								<label for="login-password">Passord: </label>
								<input type="password"
								       id="login-password"
								       name="password"
								       placeholder="Passord">
							</li>
						</ol>
						<input type="submit" value="Logg inn">
						{{end}}
					</fieldset>
				</form>
{{template "foot" .}}
{{end}}

{{define "edit"}}
{{template "head" .}}
{{template "nav" .}}
				<form method="post" action="/edit">
					<input type="hidden"
					       name="original-name"
					       value="{{.OriginalName}}">
					<input type="hidden"
					       name="original-server"
					       value="{{.OriginalServer}}">
					<fieldset>
						{{if .Message}}<p>{{.Message}}</p>{{end}}
						<ol>
							<li>
								<label for="submit-name">Kanalnavn: </label>
								<input
								       type="text"
								       id="submit-name"
								       name="name"
								       value="{{.Name}}"
								       placeholder="#kanal"
								       required>
							</li>
							<li>
								<label for="submit-server">IRC-nettverk: </label>
								<input type="text"
								       id="submit-server"
								       name="server"
								       value="{{.Server}}"
								       placeholder="irc.eksempel.net"
								       required>
							</li>
							<li>
								<label for="submit-weblink">Webchat-URL: </label>
								<input type="text"
								       id="submit-weblink"
								       value="{{.WebLink}}"
								       name="weblink">
							</li>
							<li>
								<label for="submit-description">Beskrivelse:</label><br>
								<textarea name="description"
									  id="submit-description"
									  maxlength="160"
									  required>{{.Description}}</textarea>
							</li>
						</ol>
						<input type="submit" value="Endre">
					</fieldset>
				</form>
{{template "foot" .}}
{{end}}

{{define "error"}}
{{template "head" .}}
{{template "nav" .}}
				<h2>En feil oppstod!</h2>
				<pre lang="en">{{.Message}}</pre>
				<p>Feilen har blitt loggf√∏rt.</p>
{{template "foot" .}}
{{end}}

{{define "delete"}}
{{template "head" .}}
{{template "nav" .}}
				<p>{{.Message}}</p>
				<p><a href="{{.Redirect}}">Tilbake.</a></p>
{{template "foot" .}}
{{end}}

{{define "help"}}
{{template "head" .}}
{{template "nav" .}}
				<article>
{{.Content}}
				</article>
{{template "foot" .}}
{{end}}
